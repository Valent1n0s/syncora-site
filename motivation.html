<!DOCTYPE html>

<html lang="uk">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>–ú–æ—Ç–∏–≤–∞—Ü—ñ—è ‚Äî SyncOra</title>
<!-- –®—Ä–∏—Ñ—Ç–∏ —ñ —Å—Ç–∏–ª—ñ -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&amp;family=Urbanist:wght@400;600;800&amp;display=swap" rel="stylesheet"/>
<link href="style.css" rel="stylesheet"/>
<!-- –í–±—É–¥–æ–≤–∞–Ω—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –º–æ–¥–∞–ª–∫–∏ -->

<!-- –õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–∫–ª–∞–¥—É —Ç–∞ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é -->
<script>
    let currentLang = 'uk';
    const translations = {
      uk: {
        navHome:       "–ì–æ–ª–æ–≤–Ω–∞",
        navTasks:      "–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è",
        navComm:       "–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è",
        navPerf:       "–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å",
        navMot:        "–ú–æ—Ç–∏–≤–∞—Ü—ñ—è",
        pageTitle:     "–ú–æ—Ç–∏–≤–∞—Ü—ñ—è",
        pageSub:       "–ü—ñ–¥—Ç—Ä–∏–º—É–π—Ç–µ –µ–Ω—Ç—É–∑—ñ–∞–∑–º –∫–æ–º–∞–Ω–¥–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —á–µ–ª–µ–Ω–¥–∂—ñ–≤, –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å —ñ —Å–∏—Å—Ç–µ–º–∏ –Ω–∞–≥–æ—Ä–æ–¥.",
        feat1Title:    "–ß–µ–ª–µ–Ω–¥–∂—ñ",
        feat1Desc:     "–°—Ç–≤–æ—Ä—é–π—Ç–µ –∑–º–∞–≥–∞–Ω–Ω—è –º—ñ–∂ –∫–æ–º–∞–Ω–¥–∞–º–∏ —Ç–∞ –æ–∫—Ä–µ–º–∏–º–∏ —É—á–∞—Å–Ω–∏–∫–∞–º–∏ –¥–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è —Ü—ñ–ª–µ–π.",
        feat2Title:    "–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è",
        feat2Desc:     "–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ä–∏—Ç–º —ñ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –º–æ—Ç–∏–≤–∞—Ü—ñ—é.",
        feat3Title:    "–°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥–æ—Ä–æ–¥",
        feat3Desc:     "–í—ñ–¥–∑–Ω–∞—á–∞–π—Ç–µ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–º–∏ –≤—ñ–¥–∑–Ω–∞–∫–∞–º–∏ —Ç–∞ –±–æ–Ω—É—Å–∞–º–∏.",
        btnAction:     "–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —á–µ–ª–µ–Ω–¥–∂",
        modalTitle:    "–ù–æ–≤–∏–π —á–µ–ª–µ–Ω–¥–∂",
        modalName:     "–ù–∞–∑–≤–∞ —á–µ–ª–µ–Ω–¥–∂—É",
        modalDesc:     "–û–ø–∏—Å —á–µ–ª–µ–Ω–¥–∂—É",
        modalDeadline:"–î–µ–¥–ª–∞–π–Ω",
        modalSubmit:   "–°—Ç–≤–æ—Ä–∏—Ç–∏ —á–µ–ª–µ–Ω–¥–∂",
        footerText:    "¬© 2025 SyncOra. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ."
      },
      en: {
        navHome:       "Home",
        navTasks:      "Management",
        navComm:       "Communication",
        navPerf:       "Performance",
        navMot:        "Motivation",
        pageTitle:     "Motivation",
        pageSub:       "Keep your team‚Äôs spirit high with challenges, reminders and rewards.",
        feat1Title:    "Challenges",
        feat1Desc:     "Create competitions between teams and individuals to reach goals.",
        feat2Title:    "Reminders",
        feat2Desc:     "Automated reminders help keep the pace and motivation.",
        feat3Title:    "Rewards System",
        feat3Desc:     "Celebrate achievements with virtual badges and bonuses.",
        btnAction:     "Start Challenge",
        modalTitle:    "New Challenge",
        modalName:     "Challenge Name",
        modalDesc:     "Challenge Description",
        modalDeadline:"Deadline",
        modalSubmit:   "Create Challenge",
        footerText:    "¬© 2025 SyncOra. All rights reserved."
      }
    };

    function applyLanguage(lang) {
      const t = translations[lang];
      if (!t) return;
      currentLang = lang;

      // –ù–∞–≤—ñ–≥–∞—Ü—ñ—è
      const nav = document.querySelectorAll('.navigation ul li a');
      nav[0].innerText = t.navHome;
      nav[1].innerText = t.navTasks;
      nav[2].innerText = t.navComm;
      nav[3].innerText = t.navPerf;
      nav[4].innerText = t.navMot;

      // –ó–∞–≥–æ–ª–æ–≤–æ–∫
      document.querySelector('.page-title h1').innerText = t.pageTitle;
      document.querySelector('.page-title p').innerText = t.pageSub;

      // –§—ñ—á—ñ
      const feats = document.querySelectorAll('.motivation-feature');
      feats.forEach((el, i) => {
        el.querySelector('h3').innerText = t[`feat${i+1}Title`];
        el.querySelector('p').innerText  = t[`feat${i+1}Desc`];
      });

      // –ö–Ω–æ–ø–∫–∞ –¥—ñ—ó
      document.querySelector('.motivation-action .btn-large').innerText = t.btnAction;

      // –ú–æ–¥–∞–ª–∫–∞
      document.querySelector('#challengeModal h2').innerText           = t.modalTitle;
      document.getElementById('challengeTitle').placeholder           = t.modalName;
      document.getElementById('challengeDescription').placeholder     = t.modalDesc;
      document.getElementById('challengeDeadline').placeholder        = t.modalDeadline;
      document.querySelector('#challengeForm button').innerText       = t.modalSubmit;

      // –§—É—Ç–µ—Ä
      document.querySelector('footer p').innerText = t.footerText;

      // –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤–∏
      document.getElementById('lang-toggle').innerText = (lang === 'uk' ? '–£–∫—Ä' : 'En');
    }

    document.addEventListener('DOMContentLoaded', () => {
      applyLanguage(currentLang);

      // –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤–∏
      document.getElementById('lang-toggle')
        .addEventListener('click', () => applyLanguage(currentLang === 'uk' ? 'en' : 'uk'));

      // –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é
      document.querySelector('.menu-toggle')
        .addEventListener('click', () => {
          document.querySelector('.navigation ul').classList.toggle('show');
        });
    });
  </script>
<!-- AOS -->
<link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet"/>

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    background: linear-gradient(to bottom, #f2f4f7, #ffffff);
    color: #111;
    margin: 0;
  }
  .motivation-feature {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.05);
    padding: 24px;
    transition: transform 0.2s ease;
  }
  .motivation-feature:hover {
    transform: translateY(-4px);
  }
  .btn-large {
    background: #007aff;
    color: white;
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 14px rgba(0,122,255,0.3);
    transition: background 0.3s ease;
  }
  .btn-large:hover {
    background: #005fce;
  }
  .challenge-list ul {
    list-style: none;
    padding: 0;
  }
  .challenge-item {
    background: #fff;
    padding: 20px;
    margin-bottom: 16px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    transition: transform 0.2s ease;
  }
  .challenge-item:hover {
    transform: translateY(-4px);
  }
  .challenge-item h3 {
    margin-top: 0;
    color: #007aff;
  }
  .challenge-item button {
    margin-top: 10px;
    padding: 6px 12px;
    border: none;
    border-radius: 8px;
    font-weight: 500;
    margin-right: 8px;
    cursor: pointer;
  }
</style>
</head>
<body data-page="motivation">
<!-- Header -->
<header class="site-header">
<div class="nav">
<div class="logo">
<a href="index.html"><img alt="SyncOra Logo" src="images/logo.png"/></a>
</div>
<div aria-label="Toggle menu" class="menu-toggle">
<span></span><span></span><span></span>
</div>
<nav class="navigation">
<ul>
<li><a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a></li>
<li><a href="tasks.html">–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è</a></li>
<li><a href="communication.html">–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è</a></li>
<li><a href="performance.html">–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</a></li>
<li><a class="active" href="motivation.html">–ú–æ—Ç–∏–≤–∞—Ü—ñ—è</a></li>
</ul>
</nav>
<div class="controls">
<button class="lang-toggle" id="lang-toggle">–£–∫—Ä</button>
<a class="auth-btn" href="login.html" id="userAction">–£–≤—ñ–π—Ç–∏</a>
</div>
</div>
</header>
<!-- Hero -->
<section class="page-header" style="background-image: url('images/motivation-background.jpg');">
<div class="page-title" data-aos="fade-up">
<h1>–ú–æ—Ç–∏–≤–∞—Ü—ñ—è</h1>
<p>–ü—ñ–¥—Ç—Ä–∏–º—É–π—Ç–µ –µ–Ω—Ç—É–∑—ñ–∞–∑–º –∫–æ–º–∞–Ω–¥–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —á–µ–ª–µ–Ω–¥–∂—ñ–≤, –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å —ñ —Å–∏—Å—Ç–µ–º–∏ –Ω–∞–≥–æ—Ä–æ–¥.</p>
</div>
</section>
<!-- Features -->
<main id="motivation">
<section class="motivation-features" data-aos="fade-up">
<div class="motivation-feature" data-aos="zoom-in">
<h3>–ß–µ–ª–µ–Ω–¥–∂—ñ</h3>
<p>–°—Ç–≤–æ—Ä—é–π—Ç–µ –∑–º–∞–≥–∞–Ω–Ω—è –º—ñ–∂ –∫–æ–º–∞–Ω–¥–∞–º–∏ —Ç–∞ –æ–∫—Ä–µ–º–∏–º–∏ —É—á–∞—Å–Ω–∏–∫–∞–º–∏ –¥–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è —Ü—ñ–ª–µ–π.</p>
</div>
<div class="motivation-feature" data-aos="zoom-in" data-aos-delay="100">
<h3>–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è</h3>
<p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ä–∏—Ç–º —ñ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –º–æ—Ç–∏–≤–∞—Ü—ñ—é.</p>
</div>
<div class="motivation-feature" data-aos="zoom-in" data-aos-delay="200">
<h3>–°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥–æ—Ä–æ–¥</h3>
<p>–í—ñ–¥–∑–Ω–∞—á–∞–π—Ç–µ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–º–∏ –≤—ñ–¥–∑–Ω–∞–∫–∞–º–∏ —Ç–∞ –±–æ–Ω—É—Å–∞–º–∏.</p>
</div>
</section>
<div class="motivation-action" data-aos="fade-up">
<a class="btn-large" href="#" id="openChallengeBtn">–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —á–µ–ª–µ–Ω–¥–∂</a>
</div>
<section class="challenge-list" data-aos="fade-up" id="challengeList">

<!-- –†–µ–π—Ç–∏–Ω–≥ —ñ –±–µ–π–¥–∂—ñ -->
<section class="user-motivation-data" data-aos="fade-up" style="margin: 60px auto; max-width: 1000px;">
  <h2 style="text-align:center;">–†–µ–π—Ç–∏–Ω–≥ —Ç–∞ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è</h2>
  <table style="width:100%;border-collapse:collapse;text-align:left;margin-top:20px;">
    <thead>
      <tr style="background:#f0f0f0;">
        <th style="padding:10px;">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</th>
        <th style="padding:10px;">–ë–∞–ª–∏</th>
        <th style="padding:10px;">–ë–µ–π–¥–∂—ñ</th>
        <th style="padding:10px;">–ü—Ä–æ–≥—Ä–µ—Å</th>
      </tr>
    </thead>
    <tbody id="motivationStats">
      <!-- JS –¥–æ–¥–∞—î —Ç—É—Ç –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
    </tbody>
  </table>
</section>
<script>
function loadMotivationStats() {
  const tbody = document.getElementById('motivationStats');
  tbody.innerHTML = '';
  const challenges = JSON.parse(localStorage.getItem('challenges')) || [];
  const byUser = {};

  challenges.forEach(c => {
    const email = c.email || 'unknown';
    byUser[email] = byUser[email] || { points: 0, count: 0 };
    byUser[email].points += 10;
    byUser[email].count += 1;
  });

  for (const [email, stats] of Object.entries(byUser)) {
    const row = document.createElement('tr');
    const badge = stats.count >= 5 ? 'üèÜ' : stats.count >= 3 ? 'üéñÔ∏è' : '‚≠ê';
    const progress = Math.min(stats.points, 100);
    row.innerHTML = `
      <td style="padding:10px;">${email}</td>
      <td style="padding:10px;">${stats.points}</td>
      <td style="padding:10px;">${badge}</td>
      <td style="padding:10px;"><div style='background:#eee;width:100%;height:14px;border-radius:8px;overflow:hidden;'>
        <div style='background:#0077ff;width:${progress}%;height:100%;'></div>
      </div></td>
    `;
    tbody.appendChild(row);
  }
}
document.addEventListener('DOMContentLoaded', loadMotivationStats);
</script>
        <h2>–ê–∫—Ç–∏–≤–Ω—ñ —á–µ–ª–µ–Ω–¥–∂—ñ</h2>
<ul id="challengesContainer"></ul>
</section>
<div class="export-controls" style="text-align:center; margin-top: 24px;">
<button onclick="exportData('json')" style="padding:8px 16px; margin-right: 10px;">–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ JSON</button>
<button onclick="exportData('csv')" style="padding:8px 16px;">–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ CSV</button>
</div>
</main>
<!-- Modal -->
<div class="modal" id="challengeModal">
<div class="modal-content" data-aos="zoom-in">
<span class="close">√ó</span>
<h2>–ù–æ–≤–∏–π —á–µ–ª–µ–Ω–¥–∂</h2>
<form id="challengeForm">
<input id="challengeTitle" placeholder="–ù–∞–∑–≤–∞ —á–µ–ª–µ–Ω–¥–∂—É" required="" type="text"/>
<textarea id="challengeDescription" placeholder="–û–ø–∏—Å —á–µ–ª–µ–Ω–¥–∂—É" required=""></textarea>
<input id="challengeDeadline" required="" type="date"/>
<button class="btn" type="submit">–°—Ç–≤–æ—Ä–∏—Ç–∏ —á–µ–ª–µ–Ω–¥–∂</button>
</form>
</div>
</div>
<!-- Footer -->
<footer>
<p>¬© 2025 SyncOra. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
</footer>
<!-- –°–∫—Ä–∏–ø—Ç–∏ -->
<script>
function editItem(index) {
  const type = document.body.dataset.page;
  const key = {
    tasks: 'tasks',
    performance: 'reports',
    communication: 'notes',
    motivation: 'challenges'
  }[type];

  const items = JSON.parse(localStorage.getItem(key)) || [];
  const item = items[index];
  const newTitle = prompt("–ó–º—ñ–Ω–∏—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫:", item.title || item.topic);
  const newText  = prompt("–ó–º—ñ–Ω–∏—Ç–∏ –æ–ø–∏—Å:", item.desc || item.text);
  if (newTitle !== null && newText !== null) {
    if (key === 'tasks') {
      const newDeadline = prompt("–ó–º—ñ–Ω–∏—Ç–∏ –¥–µ–¥–ª–∞–π–Ω:", item.deadline);
      const newAssignee = prompt("–ó–º—ñ–Ω–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–≤—Ü—è:", item.assignee);
      items[index] = { title: newTitle, desc: newText, deadline: newDeadline, assignee: newAssignee };
    } else {
      items[index] = key === 'notes'
        ? { topic: newTitle, text: newText }
        : { title: newTitle, text: newText };
    }
    localStorage.setItem(key, JSON.stringify(items));
    location.reload();
  }
}
</script><script>
function exportData(format) {
  const user = JSON.parse(localStorage.getItem('loggedInUser'));
  if (!user) {
    alert("–°–ø–æ—á–∞—Ç–∫—É —É–≤—ñ–π–¥—ñ—Ç—å —É –∞–∫–∞—É–Ω—Ç.");
    return;
  }
  const key = {
    tasks: 'tasks',
    performance: 'reports',
    communication: 'notes',
    motivation: 'challenges'
  }[document.body.dataset.page];

  const rawData = JSON.parse(localStorage.getItem(key)) || [];
  const filtered = rawData.filter(item => !item.email || item.email === user.email);
  const filename = `${key}_${user.email.replace(/[@.]/g, '_')}.${format}`;

  if (format === 'json') {
    const blob = new Blob([JSON.stringify(filtered, null, 2)], { type: 'application/json' });
    downloadBlob(blob, filename);
  } else if (format === 'csv') {
    const headers = Object.keys(filtered[0] || {});
    const rows = filtered.map(obj => headers.map(k => JSON.stringify(obj[k] || '')).join(','));
    const csv = [headers.join(','), ...rows].join('\n');
    const blob = new Blob([csv], { type: 'text/csv' });
    downloadBlob(blob, filename);
  }
}

function downloadBlob(blob, filename) {
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}
</script><script src="lang.js"></script>
<script type="module" src="firebase-config.js"></script>
<script type="module" src="script.js"></script>
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<script>
function loadChallenges() {
  const container = document.getElementById('challengesContainer');
  container.innerHTML = '';
  const challenges = JSON.parse(localStorage.getItem('challenges')) || [];
  challenges.forEach((c, index) => {
    const item = document.createElement('li');
    item.className = 'challenge-item';
    item.innerHTML = `<h3>${c.title}</h3><p>${c.desc}</p><p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> ${c.deadline}</p>
    <button onclick="deleteChallenge(${index})" style="margin-top:10px;padding:6px 12px;border:none;border-radius:6px;background:#ff4d4f;color:#fff;cursor:pointer;">–í–∏–¥–∞–ª–∏—Ç–∏
    <button onclick="editItem(${index})" style="margin-left:10px;padding:6px 12px;border:none;border-radius:6px;background:#ffaa00;color:#fff;cursor:pointer;">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</button>
</button>`;
    container.appendChild(item);
  });
}
function saveChallengeToStorage(challenge) {
  const challenges = JSON.parse(localStorage.getItem('challenges')) || [];
  challenges.push({ ...challenge, email: JSON.parse(localStorage.getItem('loggedInUser')).email });
  localStorage.setItem('challenges', JSON.stringify(challenges));
}
function deleteChallenge(index) {
  const challenges = JSON.parse(localStorage.getItem('challenges')) || [];
  challenges.splice(index, 1);
  localStorage.setItem('challenges', JSON.stringify(challenges));
  loadChallenges();
}
document.getElementById('challengeForm').addEventListener('submit', e => {
  e.preventDefault();
  const title = document.getElementById('challengeTitle').value;
  const desc = document.getElementById('challengeDescription').value;
  const deadline = document.getElementById('challengeDeadline').value;
  const newChallenge = { title, desc, deadline };
  saveChallengeToStorage(newChallenge);
  loadChallenges();
  document.getElementById('challengeModal').style.display = 'none';
  e.target.reset();
});
document.addEventListener('DOMContentLoaded', loadChallenges);
</script><script>
    AOS.init({ duration: 1000, once: true });

document.addEventListener('DOMContentLoaded', () => {
  const userBtn = document.getElementById('userAction');
  if (userBtn) {
    const user = JSON.parse(localStorage.getItem('loggedInUser'));
    if (user) {
      userBtn.textContent = user.name || '–ö–∞–±—ñ–Ω–µ—Ç';
      userBtn.setAttribute('href', 'dashboard.html');
    } else {
      userBtn.textContent = '–£–≤—ñ–π—Ç–∏';
      userBtn.setAttribute('href', 'login.html');
    }
  }
});


    // –í—ñ–¥–∫—Ä–∏—Ç—Ç—è/–∑–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª–∫–∏
    const openBtn  = document.getElementById('openChallengeBtn');
    const modal    = document.getElementById('challengeModal');
    const closeBtn = modal.querySelector('.close');

    openBtn.addEventListener('click', e => {
      e.preventDefault();
      modal.style.display = 'flex';
    });
    closeBtn.addEventListener('click', () => modal.style.display = 'none');
    window.addEventListener('click', e => {
      if (e.target === modal) modal.style.display = 'none';
    });
  </script>

<!-- –ï–∫—Å–ø–æ—Ä—Ç –≤ PDF -->
<section class="pdf-export" style="text-align:center; margin-top:40px;">
  <button onclick="downloadPDF()" class="btn-large" style="margin:auto;">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ PDF</button>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
async function downloadPDF() {
  const {{ jsPDF }} = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(16);
  doc.text("–ó–≤—ñ—Ç –ø–æ –º–æ—Ç–∏–≤–∞—Ü—ñ—ó", 20, 20);
  let y = 30;
  const stats = document.querySelectorAll('#motivationStats tr');
  stats.forEach(row => {
    const cells = row.querySelectorAll('td');
    const line = Array.from(cells).map(cell => cell.innerText).join(' | ');
    doc.text(line, 20, y);
    y += 10;
  });
  doc.save("motivation-stats.pdf");
}
</script>

<!-- –ì—Ä–∞—Ñ—ñ–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ (–ø—Å–µ–≤–¥–æ) -->
<section class="daily-stats" style="max-width:800px;margin:60px auto;">
  <h2 style="text-align:center;">–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–æ –¥–Ω—è—Ö</h2>
  <canvas id="dailyChart" height="200"></canvas>
</section>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const ctx = document.getElementById('dailyChart').getContext('2d');
  const data = JSON.parse(localStorage.getItem('challenges')) || [];
  const days = {};

  data.forEach(ch => {
    const date = ch.deadline || '–Ω–µ–≤—ñ–¥–æ–º–æ';
    days[date] = (days[date] || 0) + 1;
  });

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Object.keys(days),
      datasets: [{
        label: '–ß–µ–ª–µ–Ω–¥–∂—ñ–≤ –Ω–∞ –¥–µ–Ω—å',
        data: Object.values(days),
        backgroundColor: '#0077ff'
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
});
</script>


<!-- –î–æ—Å—è–≥–Ω–µ–Ω–Ω—è –º—ñ—Å—è—Ü—è -->
<section class="monthly-achievements" style="max-width:1000px;margin:60px auto;text-align:center;">
  <h2>–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è –º—ñ—Å—è—Ü—è</h2>
  <p>–ù–∞–π–∞–∫—Ç–∏–≤–Ω—ñ—à—ñ —É—á–∞—Å–Ω–∏–∫–∏, —è–∫—ñ –æ—Ç—Ä–∏–º–∞–ª–∏ –Ω–∞–π–±—ñ–ª—å—à–µ –±–∞–ª—ñ–≤ —Ü—å–æ–≥–æ –º—ñ—Å—è—Ü—è.</p>
  <div id="topUsers" style="display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-top:30px;"></div>
</section>
<script>
function loadTopUsers() {
  const container = document.getElementById('topUsers');
  container.innerHTML = '';
  const challenges = JSON.parse(localStorage.getItem('challenges')) || [];
  const stats = {};
  const currentMonth = new Date().toISOString().slice(0, 7);

  challenges.forEach(c => {
    const email = c.email || 'unknown';
    const deadline = c.deadline?.slice(0, 7) || 'none';
    if (deadline === currentMonth) {
      stats[email] = (stats[email] || 0) + 1;
    }
  });

  Object.entries(stats).sort((a,b)=>b[1]-a[1]).slice(0,3).forEach(([email, count]) => {
    const div = document.createElement('div');
    div.style.cssText = 'background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05);width:220px;';
    div.innerHTML = `<h3>${email}</h3><p>–ß–µ–ª–µ–Ω–¥–∂—ñ–≤: ${count}</p><p style="font-size:30px;">üèÖ</p>`;
    container.appendChild(div);
  });
}
document.addEventListener('DOMContentLoaded', loadTopUsers);
</script>

<!-- –Ü—Å—Ç–æ—Ä—ñ—è –¥—ñ–π -->
<section style="max-width:900px;margin:60px auto;">
  <h2 style="text-align:center;">–Ü—Å—Ç–æ—Ä—ñ—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π</h2>
  <ul id="activityHistory" style="list-style:none;padding:0;"></ul>
</section>
<script>
function loadActivityHistory() {
  const list = document.getElementById('activityHistory');
  list.innerHTML = '';
  const data = JSON.parse(localStorage.getItem('challenges')) || [];
  data.slice(-10).reverse().forEach(c => {
    const li = document.createElement('li');
    li.style.cssText = 'background:#f9f9f9;padding:12px;border-radius:8px;margin-bottom:10px;';
    li.textContent = `[${c.deadline}] ${c.title} ‚Äî ${c.desc}`;
    list.appendChild(li);
  });
}
document.addEventListener('DOMContentLoaded', loadActivityHistory);
</script>

<!-- –ê–Ω—ñ–º–∞—Ü—ñ—è –ø–æ—è–≤–∏ –¥–∞–Ω–∏—Ö -->
<style>
  .fade-in { animation: fadeInUp 0.8s ease both; }
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
<script>
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.motivation-feature, .challenge-item, .task-item').forEach((el, i) => {
    el.classList.add('fade-in');
    el.style.animationDelay = `${i * 0.1}s`;
  });
});
</script>


<!-- –§—ñ–ª—å—Ç—Ä –ø–æ –º—ñ—Å—è—Ü—é -->
<section style="max-width:800px;margin:40px auto;text-align:center;">
  <h2>–§—ñ–ª—å—Ç—Ä –∑–∞ –º—ñ—Å—è—Ü–µ–º</h2>
  <input type="month" id="monthFilter" style="padding:10px;border-radius:8px;border:1px solid #ccc;" />
  <button class="btn-large" onclick="filterByMonth()">–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏</button>
</section>
<script>
function filterByMonth() {
  const selected = document.getElementById('monthFilter').value;
  if (!selected) return alert('–û–±–µ—Ä—ñ—Ç—å –º—ñ—Å—è—Ü—å');
  const container = document.getElementById('challengesContainer');
  const data = JSON.parse(localStorage.getItem('challenges')) || [];
  container.innerHTML = '';
  data.filter(c => c.deadline?.slice(0, 7) === selected).forEach((c, index) => {
    const li = document.createElement('li');
    li.className = 'challenge-item fade-in';
    li.innerHTML = `<h3>${c.title}</h3><p>${c.desc}</p><p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> ${c.deadline}</p>`;
    container.appendChild(li);
  });
}
</script>

<!-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –æ—á–∏—â–µ–Ω–Ω—è -->
<section style="max-width:800px;margin:40px auto;text-align:center;">
  <button onclick="sortByPoints()" class="btn-large" style="margin-right:10px;">–°–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞ –±–∞–ª–∞–º–∏</button>
  <button onclick="clearAllChallenges()" class="btn-large" style="background:#ff4d4f;">–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ —á–µ–ª–µ–Ω–¥–∂—ñ</button>
</section>
<script>
function sortByPoints() {
  const challenges = JSON.parse(localStorage.getItem('challenges')) || [];
  const scores = {};
  challenges.forEach(c => {
    const email = c.email || '–Ω–µ–≤—ñ–¥–æ–º–æ';
    scores[email] = (scores[email] || 0) + 10;
  });

  const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
  alert('–†–µ–π—Ç–∏–Ω–≥:
' + sorted.map(([email, pts]) => `${email}: ${pts} –±–∞–ª—ñ–≤`).join('\n'));
}

function clearAllChallenges() {
  if (confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ —á–µ–ª–µ–Ω–¥–∂—ñ?')) {
    localStorage.removeItem('challenges');
    location.reload();
  }
}
</script>


<!-- –ë–µ–π–¥–∂—ñ –∑ —ñ–∫–æ–Ω–∫–∞–º–∏ -->
<section style="max-width:1000px;margin:60px auto;text-align:center;">
  <h2>–ö–æ–ª–µ–∫—Ü—ñ—è –±–µ–π–¥–∂—ñ–≤</h2>
  <div style="display:flex;flex-wrap:wrap;justify-content:center;gap:20px;">
    <div style="padding:20px;background:#fff;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.05);width:180px;">
      <p style="font-size:40px;">ü•á</p>
      <h3>–õ—ñ–¥–µ—Ä</h3>
      <p>–ù–∞–π–±—ñ–ª—å—à–µ —á–µ–ª–µ–Ω–¥–∂—ñ–≤</p>
    </div>
    <div style="padding:20px;background:#fff;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.05);width:180px;">
      <p style="font-size:40px;">üéØ</p>
      <h3>–°–Ω–∞–π–ø–µ—Ä</h3>
      <p>–£—Å—ñ —á–µ–ª–µ–Ω–¥–∂—ñ –∑–∞–≤–µ—Ä—à–µ–Ω–æ</p>
    </div>
    <div style="padding:20px;background:#fff;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.05);width:180px;">
      <p style="font-size:40px;">üî•</p>
      <h3>–ê–∫—Ç–∏–≤—ñ—Å—Ç</h3>
      <p>3 —á–µ–ª–µ–Ω–¥–∂—ñ –∑–∞ —Ç–∏–∂–¥–µ–Ω—å</p>
    </div>
  </div>
</section>

<!-- –í—ñ–¥–∂–µ—Ç –¥–Ω—è -->
<section style="margin:60px auto;text-align:center;">
  <h2>–ß–µ–ª–µ–Ω–¥–∂ –¥–Ω—è</h2>
  <p id="dailyTip" style="font-size:18px;padding:10px;background:#eaf4ff;display:inline-block;border-radius:8px;"></p>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const tips = [
    '–°—Ç–≤–æ—Ä–∏ –∫–æ—Ä–æ—Ç–∫–∏–π —á–µ–ª–µ–Ω–¥–∂ –¥–ª—è –≤—Å—ñ—Ö!',
    '–û—Ü—ñ–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –º–∏–Ω—É–ª–æ–≥–æ —Ç–∏–∂–Ω—è.',
    '–ü—ñ–¥—Ç—Ä–∏–º–∞–π –∫–æ–ª–µ–≥—É –≤ —Å–∫–ª–∞–¥–Ω–æ–º—É –∑–∞–≤–¥–∞–Ω–Ω—ñ.',
    '–ó—Ä–æ–±–∏ –ø–µ—Ä–µ—Ä–≤—É ‚Äî –º–æ—Ç–∏–≤–∞—Ü—ñ—è –ø–æ—Ç—Ä–µ–±—É—î –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è!',
    '–ü—Ä–∏–¥—É–º–∞–π –Ω–æ–≤—É –Ω–∞–≥–æ—Ä–æ–¥—É!'
  ];
  const tip = tips[Math.floor(Math.random() * tips.length)];
  document.getElementById('dailyTip').textContent = tip;
});
</script>

<!-- Push-–∑–∞–≥–ª—É—à–∫–∞ -->
<section style="text-align:center;margin-top:40px;">
  <button class="btn-large" onclick="notifyUser()">–ù–∞–≥–∞–¥–∞—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ</button>
</section>
<script>
function notifyUser() {
  alert('üîî Push-–Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –±—É–¥–µ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ (—ñ–º—ñ—Ç–∞—Ü—ñ—è)');
}
</script>

<!-- –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ -->
<section style="max-width:800px;margin:60px auto;">
  <h2 style="text-align:center;">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é</h2>
  <form onsubmit="saveProfile(event)" style="display:grid;gap:16px;max-width:400px;margin:auto;">
    <input type="text" id="profileName" placeholder="–í–∞—à–µ —ñ–º‚Äô—è" required />
    <input type="email" id="profileEmail" placeholder="Email" required />
    <button class="btn-large" type="submit">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
  </form>
</section>
<script>
function saveProfile(e) {
  e.preventDefault();
  const name = document.getElementById('profileName').value;
  const email = document.getElementById('profileEmail').value;
  const profile = { name, email };
  localStorage.setItem('userProfile', JSON.stringify(profile));
  alert('–ü—Ä–æ—Ñ—ñ–ª—å –æ–Ω–æ–≤–ª–µ–Ω–æ!');
}
</script>


<!-- –†—ñ–≤–µ–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ -->
<section style="max-width:800px;margin:60px auto;text-align:center;">
  <h2>–í–∞—à —Ä—ñ–≤–µ–Ω—å</h2>
  <p id="userLevel" style="font-size:24px;">–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫...</p>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const challenges = JSON.parse(localStorage.getItem('challenges')) || [];
  const current = JSON.parse(localStorage.getItem('loggedInUser'))?.email || 'none';
  const points = challenges.filter(c => c.email === current).length * 10;
  const level = Math.floor(points / 50) + 1;
  document.getElementById('userLevel').textContent = `Lv. ${level} (${points} –±–∞–ª—ñ–≤)`;
});
</script>

<!-- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞–≥–æ—Ä–æ–¥ -->
<section style="max-width:800px;margin:60px auto;text-align:center;">
  <h2>–°—Ç–≤–æ—Ä–∏ —Å–≤–æ—é –Ω–∞–≥–æ—Ä–æ–¥—É</h2>
  <input type="text" id="badgeTitle" placeholder="–ù–∞–∑–≤–∞ –Ω–∞–≥–æ—Ä–æ–¥–∏" style="padding:10px;border-radius:8px;border:1px solid #ccc;width:60%;" />
  <button onclick="generateBadge()" class="btn-large">–ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏</button>
  <div id="badgeOutput" style="margin-top:20px;font-size:24px;"></div>
</section>
<script>
function generateBadge() {
  const title = document.getElementById('badgeTitle').value;
  const icons = ['üåü','üèÖ','üöÄ','üí°','üß†','üéâ','üéì','üëë'];
  const icon = icons[Math.floor(Math.random() * icons.length)];
  document.getElementById('badgeOutput').textContent = `${icon} ${title}`;
}
</script>

<!-- –ü—ñ–¥—Å—É–º–∫–∏ –º—ñ—Å—è—Ü—è -->
<section style="max-width:1000px;margin:60px auto;text-align:center;">
  <h2>–ü—ñ–¥—Å—É–º–∫–∏ –º—ñ—Å—è—Ü—è</h2>
  <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —á–µ–ª–µ–Ω–¥–∂—ñ–≤.</p>
  <p id="monthlySummary" style="font-weight:bold;font-size:20px;"></p>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const challenges = JSON.parse(localStorage.getItem('challenges')) || [];
  const month = new Date().toISOString().slice(0, 7);
  const count = challenges.filter(c => c.deadline?.slice(0, 7) === month).length;
  document.getElementById('monthlySummary').textContent = `–£ —Ü—å–æ–º—É –º—ñ—Å—è—Ü—ñ —Å—Ç–≤–æ—Ä–µ–Ω–æ ${count} —á–µ–ª–µ–Ω–¥–∂—ñ–≤.`;
});
</script>


<!-- –†—ñ—á–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
<section style="max-width:1000px;margin:60px auto;">
  <h2 style="text-align:center;">–†—ñ—á–Ω–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</h2>
  <canvas id="yearlyChart" height="150"></canvas>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const ctx = document.getElementById('yearlyChart').getContext('2d');
  const data = JSON.parse(localStorage.getItem('challenges')) || [];
  const years = {};

  data.forEach(c => {
    const y = c.deadline?.slice(0, 4) || '–Ω–µ–≤—ñ–¥–æ–º–æ';
    years[y] = (years[y] || 0) + 1;
  });

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: Object.keys(years),
      datasets: [{
        label: '–ß–µ–ª–µ–Ω–¥–∂—ñ–≤ –Ω–∞ —Ä—ñ–∫',
        data: Object.values(years),
        backgroundColor: 'rgba(0,119,255,0.2)',
        borderColor: '#0077ff',
        fill: true,
        tension: 0.3
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
});
</script>

<!-- –§—ñ–¥–±–µ–∫ -->
<section style="max-width:800px;margin:60px auto;text-align:center;">
  <h2>–ó–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤‚Äô—è–∑–æ–∫</h2>
  <textarea id="feedbackText" placeholder="–í–∞—à—ñ —ñ–¥–µ—ó, –ø–æ–±–∞–∂–∞–Ω–Ω—è, –≤—ñ–¥–≥—É–∫–∏..." rows="4" style="width:100%;max-width:600px;padding:12px;border-radius:8px;"></textarea><br>
  <button onclick="submitFeedback()" class="btn-large" style="margin-top:10px;">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
</section>
<script>
function submitFeedback() {
  const txt = document.getElementById('feedbackText').value.trim();
  if (txt) {
    localStorage.setItem('feedback_' + Date.now(), txt);
    alert('–î—è–∫—É—î–º–æ –∑–∞ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤‚Äô—è–∑–æ–∫!');
    document.getElementById('feedbackText').value = '';
  } else {
    alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –Ω–∞–ø–∏—à—ñ—Ç—å —â–æ—Å—å :)');
  }
}
</script>

<!-- –ê–Ω—ñ–º–∞—Ü—ñ—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ –±–∞–ª—ñ–≤ -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const el = document.getElementById('userLevel');
  if (el && el.textContent.includes('–±–∞–ª—ñ–≤')) {
    const pts = parseInt(el.textContent.match(/\((\d+)/)?.[1] || '0');
    let count = 0;
    const interval = setInterval(() => {
      count += 1;
      el.textContent = el.textContent.replace(/\(\d+ –±–∞–ª—ñ–≤\)/, `(${count} –±–∞–ª—ñ–≤)`);
      if (count >= pts) clearInterval(interval);
    }, 15);
  }
});
</script>

<!-- –°–µ–∫—Ä–µ—Ç–Ω—ñ –±–µ–π–¥–∂—ñ -->
<section style="max-width:800px;margin:60px auto;text-align:center;">
  <h2>–°–µ–∫—Ä–µ—Ç–Ω—ñ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è üîí</h2>
  <p id="secretBadges">–í–∏–∫–æ–Ω–∞–π—Ç–µ –±—ñ–ª—å—à–µ 20 —á–µ–ª–µ–Ω–¥–∂—ñ–≤, —â–æ–± —Ä–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏!</p>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const challenges = JSON.parse(localStorage.getItem('challenges')) || [];
  if (challenges.length >= 20) {
    document.getElementById('secretBadges').innerHTML = '<span style="font-size:30px;">üéñÔ∏è –¢–∞—î–º–Ω–∏–π –∞–≥–µ–Ω—Ç ‚Ä¢ üß† –ú–æ–∑–∫–æ–≤–∏–π —Ü–µ–Ω—Ç—Ä ‚Ä¢ ü•∑ –¢—ñ–Ω—å–æ–≤–∏–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä</span>';
  }
});
</script>

</body>
</html>
