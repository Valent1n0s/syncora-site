<!DOCTYPE html>

<html lang="uk">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è ‚Äî SyncOra</title>
<!-- –®—Ä–∏—Ñ—Ç–∏ —ñ —Å—Ç–∏–ª—ñ -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&amp;family=Urbanist:wght@400;600;800&amp;display=swap" rel="stylesheet"/>
<link href="style.css" rel="stylesheet"/>
<!-- –°—Ç–∏–ª—ñ –º–æ–¥–∞–ª–∫–∏ -->
<!-- AOS –∞–Ω—ñ–º–∞—Ü—ñ—ó -->
<link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet"/>
<!-- –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–∫–ª–∞–¥—É -->
<script>
    let currentLang = 'uk';
    const translations = {
      uk: {
        navHome: "–ì–æ–ª–æ–≤–Ω–∞",
        navTasks: "–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è",
        navComm: "–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è",
        navPerf: "–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å",
        navMot: "–ú–æ—Ç–∏–≤–∞—Ü—ñ—è",
        pageTitle: "–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è",
        pageSub: "–ü–ª–∞–Ω—É–π—Ç–µ, –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤—É–π—Ç–µ —Ç–∞ –∫–µ—Ä—É–π—Ç–µ –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏ –≤–∞—à–æ—ó –∫–æ–º–∞–Ω–¥–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –π –ø—Ä–æ–∑–æ—Ä–æ.",
        feat1Title: "–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å",
        feat1Desc: "–°—Ç–≤–æ—Ä—é–π—Ç–µ –∑–∞–≤–¥–∞–Ω–Ω—è, –≤—Å—Ç–∞–Ω–æ–≤–ª—é–π—Ç–µ –¥–µ–¥–ª–∞–π–Ω–∏ —Ç–∞ –ø—Ä–∏–∑–Ω–∞—á–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏—Ö.",
        feat2Title: "–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏—Ö",
        feat2Desc: "–ß—ñ—Ç–∫–æ –≤–∏–∑–Ω–∞—á–∞–π—Ç–µ —Ä–æ–ª—ñ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –ø—Ä–æ–∑–æ—Ä–æ—Å—Ç—ñ.",
        feat3Title: "–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É",
        feat3Desc: "–ö–æ–Ω—Ç—Ä–æ–ª—é–π—Ç–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç—É—Å–∏ —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫–∏.",
        btnAction: "–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è",
        modalTitle: "–ù–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è",
        modalName: "–ù–∞–∑–≤–∞ –∑–∞–¥–∞—á—ñ",
        modalDesc: "–û–ø–∏—Å –∑–∞–¥–∞—á—ñ",
        modalDeadline: "–î–µ–¥–ª–∞–π–Ω",
        modalAssignee: "–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å",
        modalSubmit: "–°—Ç–≤–æ—Ä–∏—Ç–∏",
        footerText: "¬© 2025 SyncOra. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ."
      },
      en: {
        navHome: "Home",
        navTasks: "Management",
        navComm: "Communication",
        navPerf: "Performance",
        navMot: "Motivation",
        pageTitle: "Management",
        pageSub: "Plan, organize and manage your team's tasks efficiently and transparently.",
        feat1Title: "Task Planning",
        feat1Desc: "Create tasks, set deadlines and assign owners.",
        feat2Title: "Assign Owners",
        feat2Desc: "Clearly define roles for maximum transparency.",
        feat3Title: "Progress Tracking",
        feat3Desc: "Monitor task completion through statuses and charts.",
        btnAction: "Create New Task",
        modalTitle: "New Task",
        modalName: "Task Title",
        modalDesc: "Task Description",
        modalDeadline: "Deadline",
        modalAssignee: "Assignee",
        modalSubmit: "Create",
        footerText: "¬© 2025 SyncOra. All rights reserved."
      }
    };

    function applyLanguage(lang) {
      const t = translations[lang];
      if (!t) return;
      currentLang = lang;

      const nav = document.querySelectorAll('.navigation ul li a');
      nav[0].innerText = t.navHome;
      nav[1].innerText = t.navTasks;
      nav[2].innerText = t.navComm;
      nav[3].innerText = t.navPerf;
      nav[4].innerText = t.navMot;

      document.querySelector('.page-title h1').innerText = t.pageTitle;
      document.querySelector('.page-title p').innerText = t.pageSub;

      const features = document.querySelectorAll('.task-feature');
      features[0].querySelector('h3').innerText = t.feat1Title;
      features[0].querySelector('p').innerText  = t.feat1Desc;
      features[1].querySelector('h3').innerText = t.feat2Title;
      features[1].querySelector('p').innerText  = t.feat2Desc;
      features[2].querySelector('h3').innerText = t.feat3Title;
      features[2].querySelector('p').innerText  = t.feat3Desc;

      document.querySelector('.task-action .btn-large').innerText = t.btnAction;

      document.querySelector('#taskModal h2').innerText = t.modalTitle;
      document.getElementById('taskTitle').placeholder = t.modalName;
      document.getElementById('taskDescription').placeholder = t.modalDesc;
      document.getElementById('taskDeadline').placeholder = t.modalDeadline;
      document.getElementById('taskAssignee').placeholder = t.modalAssignee;
      document.querySelector('#taskForm button').innerText = t.modalSubmit;

      document.querySelector('footer p').innerText = t.footerText;

      document.getElementById('lang-toggle').innerText = (lang === 'uk' ? '–£–∫—Ä' : 'En');
    }

    document.addEventListener('DOMContentLoaded', () => {
      applyLanguage(currentLang);

      document.getElementById('lang-toggle').addEventListener('click', () => {
        applyLanguage(currentLang === 'uk' ? 'en' : 'uk');
      });

      document.querySelector('.menu-toggle').addEventListener('click', () => {
        document.querySelector('.navigation ul').classList.toggle('show');
      });
    });
    // ===== –ó–ë–ï–†–ï–ñ–ï–ù–ù–Ø –Ü –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø –ó–ê–î–ê–ß =====

// –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞–¥–∞—á—ñ –∑ localStorage
function loadTasks() {
  const statusFilter = document.getElementById('statusFilter')?.value || 'all';
  const searchTerm = document.getElementById('taskSearch')?.value || '';
  const container = document.getElementById('tasksContainer');
  container.innerHTML = '';

  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  
  const filtered = tasks.filter(t => {
    const statusMatch = statusFilter === 'all' || (t.status || 'ToDo') === statusFilter;
    const searchMatch = !searchTerm || t.title.toLowerCase().includes(searchTerm.toLowerCase());
    return statusMatch && searchMatch;
  });

  document.getElementById('taskStats').innerText =
    `–ó–∞–≥–∞–ª–æ–º: ${tasks.length} | To Do: ${tasks.filter(t => (t.status||'ToDo')==='ToDo').length} | In Progress: ${tasks.filter(t => t.status==='In Progress').length} | Done: ${tasks.filter(t => t.status==='Done').length}`;

  filtered.forEach((task, index) => {

    const li = document.createElement('li');
    li.className = 'task-item';
    li.innerHTML = `
      <h3>${task.title}</h3>
      <p>${task.desc}</p>
      <p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> ${task.deadline}</p>
      <p><strong>–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å:</strong> ${task.assignee}</p><p><strong>–°—Ç–∞—Ç—É—Å:</strong> ${task.status || 'ToDo'}</p>
      <button onclick="toggleStatus(${index})" style="margin-right:6px;padding:6px 12px;background:#00bcd4;color:#fff;border:none;border-radius:6px;">‚áÑ</button><button onclick="deleteTask(${index})" style="margin-top:10px;padding:8px 16px;border:none;border-radius:8px;background:#ff4d4f;color:#fff;cursor:pointer;">–í–∏–¥–∞–ª–∏—Ç–∏</button>
    `;
    container.appendChild(li);
  });
}

// –ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–æ–≤—É –∑–∞–¥–∞—á—É –≤ localStorage
function saveTaskToStorage(task) {
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  tasks.push({ ...task, email: JSON.parse(localStorage.getItem('loggedInUser')).email });
  localStorage.setItem('tasks', JSON.stringify(tasks));
}

// –í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–¥–∞—á—É –∑–∞ —ñ–Ω–¥–µ–∫—Å–æ–º
function deleteTask(index) {
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  tasks.splice(index, 1);
  localStorage.setItem('tasks', JSON.stringify(tasks));
  loadTasks();
}

// –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
document.getElementById('taskForm').addEventListener('submit', e => {
  e.preventDefault();
  const title = document.getElementById('taskTitle').value;
  const desc = document.getElementById('taskDescription').value;
  const deadline = document.getElementById('taskDeadline').value;
  const assignee = document.getElementById('taskAssignee').value;

  const newTask = { title, desc, deadline, assignee };
  saveTaskToStorage(newTask);
  loadTasks();

  document.getElementById('taskModal').style.display = 'none';
  e.target.reset();
});

// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–∞–¥–∞—á—ñ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
document.addEventListener('DOMContentLoaded', loadTasks);
  
function toggleStatus(index) {
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  const statusOrder = ['ToDo', 'In Progress', 'Done'];
  const current = tasks[index].status || 'ToDo';
  const next = statusOrder[(statusOrder.indexOf(current) + 1) % statusOrder.length];
  tasks[index].status = next;
  localStorage.setItem('tasks', JSON.stringify(tasks));
  loadTasks();
}

document.getElementById('statusFilter').addEventListener('change', loadTasks);
document.getElementById('taskSearch').addEventListener('input', loadTasks);
</script>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    background: linear-gradient(to bottom, #f4f6f9, #ffffff);
    color: #111;
    margin: 0;
    padding: 0;
  }
  .task-feature {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.05);
    padding: 24px;
    transition: transform 0.3s ease;
  }
  .task-feature:hover {
    transform: translateY(-4px);
  }
  .task-list li {
    background: #fff;
    padding: 20px;
    margin-bottom: 12px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.04);
    transition: all 0.3s ease;
  }
  .task-list li:hover {
    box-shadow: 0 6px 16px rgba(0,0,0,0.08);
  }
  select, input[type="text"], input[type="date"], textarea {
    border-radius: 10px;
    border: 1px solid #ccc;
    padding: 12px;
    font-size: 16px;
    width: 100%;
  }
  button, .btn-large {
    border: none;
    background: #007aff;
    color: white;
    padding: 12px 24px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 16px;
    cursor: pointer;
    box-shadow: 0 4px 14px rgba(0, 122, 255, 0.4);
    transition: background 0.3s ease;
  }
  button:hover, .btn-large:hover {
    background: #005fce;
  }

.page-header {
  background-image: url('images/tasks-background.jpg');
  background-size: cover;
  background-attachment: fixed;
  background-position: center;
}

  #lang-toggle { color: #000 !important; }
</style>
</head>
<body data-page="tasks">
<!-- Header -->
<header class="site-header">
<div class="nav">
<div class="logo">
<a href="index.html"><img alt="SyncOra Logo" src="images/logo.png"/></a>
</div>
<div aria-label="Toggle menu" class="menu-toggle">
<span></span><span></span><span></span>
</div>
<nav class="navigation">
<ul>
<li><a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a></li>
<li><a class="active" href="tasks.html">–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è</a></li>
<li><a href="communication.html">–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è</a></li>
<li><a href="performance.html">–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</a></li>
<li><a href="motivation.html">–ú–æ—Ç–∏–≤–∞—Ü—ñ—è</a></li>
</ul>
</nav>
<div class="controls">
<button class="lang-toggle" id="lang-toggle" style="display:none;">–£–∫—Ä</button>
<a class="auth-btn" href="login.html" id="userAction">–£–≤—ñ–π—Ç–∏</a>
</div>
</div>
</header>
<!-- Page Header -->
<section class="page-header" style="background-image: url('images/tasks-background.jpg'); background-size: cover; background-attachment: fixed; background-position: center;">
<div class="page-title" data-aos="fade-up">
<h1>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è</h1>
<p class="page-subtitle">–ü–ª–∞–Ω—É–π—Ç–µ, –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤—É–π—Ç–µ —Ç–∞ –∫–µ—Ä—É–π—Ç–µ –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏ –≤–∞—à–æ—ó –∫–æ–º–∞–Ω–¥–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –π –ø—Ä–æ–∑–æ—Ä–æ.</p>
</div>
</section>
<!-- Main Content -->
<main id="task-coordination">
<section class="task-features" data-aos="fade-up">
<div class="task-feature" data-aos="zoom-in">
<h3>–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å</h3>
<p>–°—Ç–≤–æ—Ä—é–π—Ç–µ –∑–∞–≤–¥–∞–Ω–Ω—è, –≤—Å—Ç–∞–Ω–æ–≤–ª—é–π—Ç–µ –¥–µ–¥–ª–∞–π–Ω–∏ —Ç–∞ –ø—Ä–∏–∑–Ω–∞—á–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏—Ö.</p>
</div>
<div class="task-feature" data-aos="zoom-in" data-aos-delay="100">
<h3>–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏—Ö</h3>
<p>–ß—ñ—Ç–∫–æ –≤–∏–∑–Ω–∞—á–∞–π—Ç–µ —Ä–æ–ª—ñ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –ø—Ä–æ–∑–æ—Ä–æ—Å—Ç—ñ.</p>
</div>
<div class="task-feature" data-aos="zoom-in" data-aos-delay="200">
<h3>–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É</h3>
<p>–ö–æ–Ω—Ç—Ä–æ–ª—é–π—Ç–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç—É—Å–∏ —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫–∏.</p>
</div>
</section>
<div class="task-action" data-aos="fade-up">
<a class="btn-large" href="#" id="openTaskBtn">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è</a>
</div>
<section class="task-controls" style="margin: 40px 20px 20px;">
<h2 style="text-align:center;">–£—Å—ñ –∑–∞–¥–∞—á—ñ</h2>
<div style="display:flex;gap:20px;justify-content:center;flex-wrap:wrap;margin-top:20px;">
<select id="statusFilter" style="padding:10px;border-radius:8px;">
<option value="all">–£—Å—ñ —Å—Ç–∞—Ç—É—Å–∏</option>
<option value="ToDo">To Do</option>
<option value="In Progress">In Progress</option>
<option value="Done">Done</option>
</select>
<input id="taskSearch" placeholder="–ü–æ—à—É–∫ –∑–∞ –Ω–∞–∑–≤–æ—é" style="padding:10px;border-radius:8px;min-width:220px;" type="text"/>
</div>
<div id="taskStats" style="text-align:center;margin-top:20px;"></div>
</section>
<section class="task-list" data-aos="fade-up" id="taskList">
<h2>–°—Ç–≤–æ—Ä–µ–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</h2>
<ul id="tasksContainer"></ul>
</section>
<div class="export-controls" style="text-align:center; margin-top: 24px;">
<button onclick="exportData('json')" style="padding:8px 16px; margin-right: 10px;">–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ JSON</button>
<button onclick="exportData('csv')" style="padding:8px 16px;">–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ CSV</button>
</div>
</main>
<!-- Modal -->
<div class="modal" id="taskModal">
<div class="modal-content" data-aos="zoom-in">
<span class="close">√ó</span>
<h2>–ù–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è</h2>
<form id="taskForm">
<input id="taskTitle" placeholder="–ù–∞–∑–≤–∞ –∑–∞–¥–∞—á—ñ" required="" type="text"/>
<textarea id="taskDescription" placeholder="–û–ø–∏—Å –∑–∞–¥–∞—á—ñ" required=""></textarea>
<input id="taskDeadline" required="" type="date"/>
<input id="taskAssignee" placeholder="–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å" required="" type="text"/>
<button type="submit">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
</form>
</div>
</div>
<!-- Footer -->
<footer>
<p>¬© 2025 SyncOra. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
</footer>
<!-- AOS Script -->
<script>
function editItem(index) {
  const type = document.body.dataset.page;
  const key = {
    tasks: 'tasks',
    performance: 'reports',
    communication: 'notes',
    motivation: 'challenges'
  }[type];

  const items = JSON.parse(localStorage.getItem(key)) || [];
  const item = items[index];
  const newTitle = prompt("–ó–º—ñ–Ω–∏—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫:", item.title || item.topic);
  const newText  = prompt("–ó–º—ñ–Ω–∏—Ç–∏ –æ–ø–∏—Å:", item.desc || item.text);
  if (newTitle !== null && newText !== null) {
    if (key === 'tasks') {
      const newDeadline = prompt("–ó–º—ñ–Ω–∏—Ç–∏ –¥–µ–¥–ª–∞–π–Ω:", item.deadline);
      const newAssignee = prompt("–ó–º—ñ–Ω–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–≤—Ü—è:", item.assignee);
      items[index] = { title: newTitle, desc: newText, deadline: newDeadline, assignee: newAssignee };
    } else {
      items[index] = key === 'notes'
        ? { topic: newTitle, text: newText }
        : { title: newTitle, text: newText };
    }
    localStorage.setItem(key, JSON.stringify(items));
    location.reload();
  }
}
</script><script>
function exportData(format) {
  const user = JSON.parse(localStorage.getItem('loggedInUser'));
  if (!user) {
    alert("–°–ø–æ—á–∞—Ç–∫—É —É–≤—ñ–π–¥—ñ—Ç—å —É –∞–∫–∞—É–Ω—Ç.");
    return;
  }
  const key = {
    tasks: 'tasks',
    performance: 'reports',
    communication: 'notes',
    motivation: 'challenges'
  }[document.body.dataset.page];

  const rawData = JSON.parse(localStorage.getItem(key)) || [];
  const filtered = rawData.filter(item => !item.email || item.email === user.email);
  const filename = `${key}_${user.email.replace(/[@.]/g, '_')}.${format}`;

  if (format === 'json') {
    const blob = new Blob([JSON.stringify(filtered, null, 2)], { type: 'application/json' });
    downloadBlob(blob, filename);
  } else if (format === 'csv') {
    const headers = Object.keys(filtered[0] || {});
    const rows = filtered.map(obj => headers.map(k => JSON.stringify(obj[k] || '')).join(','));
    const csv = [headers.join(','), ...rows].join('\n');
    const blob = new Blob([csv], { type: 'text/csv' });
    downloadBlob(blob, filename);
  }
}

function downloadBlob(blob, filename) {
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}
</script><script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<script>
    AOS.init({ duration: 1000, once: true });

document.addEventListener('DOMContentLoaded', () => {
  const userBtn = document.getElementById('userAction');
  if (userBtn) {
    const user = JSON.parse(localStorage.getItem('loggedInUser'));
    if (user) {
      userBtn.textContent = user.name || '–ö–∞–±—ñ–Ω–µ—Ç';
      userBtn.setAttribute('href', 'dashboard.html');
    } else {
      userBtn.textContent = '–£–≤—ñ–π—Ç–∏';
      userBtn.setAttribute('href', 'login.html');
    }
  }
});


    const openBtn = document.getElementById('openTaskBtn');
    const modal = document.getElementById('taskModal');
    const closeBtn = modal.querySelector('.close');

    openBtn.addEventListener('click', e => {
      e.preventDefault();
      modal.style.display = 'flex';
    });

    closeBtn.addEventListener('click', () => {
      modal.style.display = 'none';
    });

    window.addEventListener('click', e => {
      if (e.target === modal) modal.style.display = 'none';
    });

    document.getElementById('taskForm').addEventListener('submit', e => {
      e.preventDefault();
      const title = document.getElementById('taskTitle').value;
      const desc = document.getElementById('taskDescription').value;
      const deadline = document.getElementById('taskDeadline').value;
      const assignee = document.getElementById('taskAssignee').value;

      const container = document.getElementById('tasksContainer');
      const li = document.createElement('li');
      li.className = 'task-item';
      li.innerHTML = `
        <h3>${title}</h3>
        <p>${desc}</p>
        <p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> ${deadline}</p>
        <p><strong>–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å:</strong> ${assignee}</p>
      `;
      container.appendChild(li);

      modal.style.display = 'none';
      e.target.reset();
    });
  </script>

<!-- –†–µ–π—Ç–∏–Ω–≥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ -->
<section style="max-width:1000px;margin:20px auto;text-align:center;">
  <h2>–†–µ–π—Ç–∏–Ω–≥ –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤</h2>
  <table style="width:100%;border-collapse:collapse;margin-top:20px;">
    <thead><tr style="background:#f0f0f0;"><th>Email</th><th>–ó–∞–≤–¥–∞–Ω—å –≤–∏–∫–æ–Ω–∞–Ω–æ</th></tr></thead>
    <tbody id="taskRankings"></tbody>
  </table>
</section>
<script>
function updateTaskRanking() {
  const tbody = document.getElementById('taskRankings');
  tbody.innerHTML = '';
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  const countByUser = {};

  tasks.forEach(t => {
    if (t.status === 'Done') {
      const user = t.assignee || '–Ω–µ–≤—ñ–¥–æ–º–æ';
      countByUser[user] = (countByUser[user] || 0) + 1;
    }
  });

  Object.entries(countByUser).sort((a,b)=>b[1]-a[1]).forEach(([email, count]) => {
    const row = document.createElement('tr');
    row.innerHTML = `<td>${email}</td><td>${count}</td>`;
    tbody.appendChild(row);
  });
}
document.addEventListener('DOMContentLoaded', updateTaskRanking);
</script>

<!-- –ö–∞–ª–µ–Ω–¥–∞—Ä –¥–µ–¥–ª–∞–π–Ω—ñ–≤ -->
<section style="max-width:1000px;margin:60px auto;">
  <h2 style="text-align:center;">–ö–∞–ª–µ–Ω–¥–∞—Ä –¥–µ–¥–ª–∞–π–Ω—ñ–≤</h2>
  <canvas id="taskCalendarChart" height="200"></canvas>
</section>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const ctx = document.getElementById('taskCalendarChart').getContext('2d');
  const data = JSON.parse(localStorage.getItem('tasks')) || [];
  const days = {};

  data.forEach(task => {
    const date = task.deadline || '–Ω–µ–≤—ñ–¥–æ–º–æ';
    days[date] = (days[date] || 0) + 1;
  });

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Object.keys(days),
      datasets: [{
        label: '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–µ–¥–ª–∞–π–Ω—ñ–≤',
        data: Object.values(days),
        backgroundColor: '#0077ff'
      }]
    },
    options: {
      responsive: true,
      scales: { y: { beginAtZero: true } }
    }
  });
});
</script>

<!-- –ö–Ω–æ–ø–∫–∞ push-–Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è -->


<!-- –ü—Ä–æ—Ñ—ñ–ª—å –≤–∏–∫–æ–Ω–∞–≤—Ü—è -->
<section style="max-width:800px;margin:60px auto;">
  <h2 style="text-align:center;">–í–∞—à –ø—Ä–æ—Ñ—ñ–ª—å</h2>
  <form onsubmit="saveTaskProfile(event)" style="display:grid;gap:16px;max-width:400px;margin:auto;">
    <input type="text" id="taskProfileName" placeholder="–Ü–º‚Äô—è" required />
    <input type="email" id="taskProfileEmail" placeholder="Email" required />
    <button class="btn-large" type="submit">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
  </form>
</section>
<script>
function saveTaskProfile(e) {
  e.preventDefault();
  const name = document.getElementById('taskProfileName').value;
  const email = document.getElementById('taskProfileEmail').value;
  localStorage.setItem('taskUser', JSON.stringify({ name, email }));
  alert('–ü—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!');
}
</script>


<!-- SVG-–∞–Ω—ñ–º–∞—Ü—ñ—è —Å—Ç–∞—Ç—É—Å—É -->
<!-- –í–∏–¥–∞–ª–µ–Ω–æ —Å—Ç–∞—Ç—É—Å -->
  <svg width="160" height="160" viewBox="0 0 100 100">
    <circle cx="50" cy="50" r="45" stroke="#007aff" stroke-width="4" fill="none"/>
    <circle cx="50" cy="50" r="30" stroke="#00c853" stroke-width="5" fill="none">
      <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50"
        dur="5s" repeatCount="indefinite"/>
    </circle>
  </svg>
</section>

<!-- Canvas —Ç–∞–π–º–ª–∞–π–Ω –í–ò–î–ê–õ–ï–ù–û -->
<!-- –í–∏–¥–∞–ª–µ–Ω–æ —Ç–∞–π–º–ª–∞–π–Ω -->
  <canvas id="taskTimeline" width="500" height="120" style="border:1px solid #ccc;"></canvas>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const canvas = document.getElementById('taskTimeline');
  const ctx = canvas.getContext('2d');
  const data = JSON.parse(localStorage.getItem('tasks')) || [];
  let x = 10;
  data.forEach((task, i) => {
    const y = 20 + (i % 5) * 20;
    ctx.fillStyle = task.status === 'Done' ? '#00c853' : '#ffab00';
    ctx.fillRect(x, y, 10, 10);
    ctx.fillText(task.title.slice(0,10), x + 15, y + 10);
    x += 120;
  });
});
</script>

<!-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ -->
<section style="text-align:center;margin:60px auto;">
  <button class="btn-large" onclick="addDailyTask()">üìå –î–æ–¥–∞—Ç–∏ —â–æ–¥–µ–Ω–Ω—É –∑–∞–¥–∞—á—É</button>
</section>
<script>
function addDailyTask() {
  const task = {
    title: '–©–æ–¥–µ–Ω–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞',
    desc: '–ó–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å –∫–æ–º–∞–Ω–¥–∏',
    deadline: new Date().toISOString().split('T')[0],
    assignee: '–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ',
    status: 'ToDo'
  };
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  tasks.push(task);
  localStorage.setItem('tasks', JSON.stringify(tasks));
  alert('–ó–∞–¥–∞—á—É –¥–æ–¥–∞–Ω–æ!');
  location.reload();
}
</script>

<!-- –§—ñ–ª—å—Ç—Ä –∑–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü–µ–º -->
<section style="text-align:center;margin:40px auto;">
  <input id="assigneeFilter" placeholder="–§—ñ–ª—å—Ç—Ä –∑–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü–µ–º" style="padding:10px;border-radius:8px;border:1px solid #ccc;" />
  <button onclick="filterByAssignee()" class="btn-large">–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏</button>
</section>
<script>
function filterByAssignee() {
  const name = document.getElementById('assigneeFilter').value.toLowerCase();
  const container = document.getElementById('tasksContainer');
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  container.innerHTML = '';
  tasks.filter(t => t.assignee?.toLowerCase().includes(name)).forEach((task, index) => {
    const li = document.createElement('li');
    li.className = 'task-item';
    li.innerHTML = `
      <h3>${task.title}</h3>
      <p>${task.desc}</p>
      <p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> ${task.deadline}</p>
      <p><strong>–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å:</strong> ${task.assignee}</p>
      <p><strong>–°—Ç–∞—Ç—É—Å:</strong> ${task.status || 'ToDo'}</p>
    `;
    container.appendChild(li);
  });
}
</script>


<!-- –ì—Ä–∞—Ñ—ñ–∫ —Å—Ç–∞—Ç—É—Å—ñ–≤ -->
<section style="max-width:1000px;margin:60px auto;">
  <h2 style="text-align:center;">–†–æ–∑–ø–æ–¥—ñ–ª –∑–∞–≤–¥–∞–Ω—å –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º</h2>
  <canvas id="statusChart" height="200"></canvas>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const ctx = document.getElementById('statusChart').getContext('2d');
  const data = JSON.parse(localStorage.getItem('tasks')) || [];
  let todo = 0, inProgress = 0, done = 0;
  data.forEach(t => {
    const status = t.status || 'ToDo';
    if (status === 'ToDo') todo++;
    else if (status === 'In Progress') inProgress++;
    else if (status === 'Done') done++;
  });

  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['To Do', 'In Progress', 'Done'],
      datasets: [{
        data: [todo, inProgress, done],
        backgroundColor: ['#fdd835', '#42a5f5', '#66bb6a']
      }]
    },
    options: {
      responsive: true
    }
  });
});
</script>

<!-- –ë–µ–π–¥–∂—ñ -->
<section style="max-width:800px;margin:20px auto;text-align:center;">
  <h2>–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è</h2>
  <div id="badgeBoard" style="font-size:24px;"></div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  const doneCount = tasks.filter(t => t.status === 'Done').length;
  const el = document.getElementById('badgeBoard');
  if (doneCount >= 10) el.textContent = 'üèÖ –í–∏–∫–æ–Ω–∞–Ω–æ 10+ –∑–∞–¥–∞—á ‚Äî –ú–æ–ª–æ–¥–µ—Ü—å!';
  else if (doneCount >= 5) el.textContent = '‚≠ê –í–∏–∫–æ–Ω–∞–Ω–æ 5 –∑–∞–¥–∞—á!';
});
</script>

<!-- –ó–≤—É–∫ –ø—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ -->
<audio id="doneSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_659f2e89cf.mp3" preload="auto"></audio>
<script>
function playDoneSound() {
  document.getElementById('doneSound').play();
}
document.addEventListener('DOMContentLoaded', () => {
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  if (tasks.some(t => t.status === 'Done')) playDoneSound();
});
</script>

<!-- –ü–∞–Ω–µ–ª—å —à–≤–∏–¥–∫–∏—Ö –¥—ñ–π -->
<section style="text-align:center;margin:40px auto;">
  <h2>–®–≤–∏–¥–∫—ñ –¥—ñ—ó</h2>
  <button class="btn-large" onclick="markAllDone()">‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –≤—Å—ñ</button>
  <button class="btn-large" onclick="clearCompleted()">üßπ –û—á–∏—Å—Ç–∏—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ñ</button>
</section>
<script>
function markAllDone() {
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  tasks.forEach(t => t.status = 'Done');
  localStorage.setItem('tasks', JSON.stringify(tasks));
  location.reload();
}
function clearCompleted() {
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  const active = tasks.filter(t => t.status !== 'Done');
  localStorage.setItem('tasks', JSON.stringify(active));
  location.reload();
}
</script>


<!-- –ü–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–∞–¥–∞—á -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const container = document.getElementById('tasksContainer');
  container.querySelectorAll('.task-item').forEach(el => {
    el.setAttribute('draggable', 'true');
    el.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', e.target.innerHTML);
      e.target.style.opacity = '0.5';
    });
    el.addEventListener('dragend', e => {
      e.target.style.opacity = '';
    });
  });

  container.addEventListener('dragover', e => e.preventDefault());
  container.addEventListener('drop', e => {
    e.preventDefault();
    const html = e.dataTransfer.getData('text/plain');
    const dropEl = document.createElement('li');
    dropEl.className = 'task-item';
    dropEl.innerHTML = html;
    container.appendChild(dropEl);
  });
});
</script>

<!-- –¢–∏–∂–Ω–µ–≤–∏–π –ø–ª–∞–Ω–µ—Ä -->
<section style="max-width:1000px;margin:60px auto;">
  <h2 style="text-align:center;">–¢–∏–∂–Ω–µ–≤–∏–π –ø–ª–∞–Ω</h2>
  <div style="display:grid;grid-template-columns:repeat(7,1fr);gap:8px;text-align:center;">
    <div>–ü–Ω</div><div>–í—Ç</div><div>–°—Ä</div><div>–ß—Ç</div><div>–ü—Ç</div><div>–°–±</div><div>–ù–¥</div>
    <div id="d1"></div><div id="d2"></div><div id="d3"></div><div id="d4"></div><div id="d5"></div><div id="d6"></div><div id="d7"></div>
  </div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const days = ['d1','d2','d3','d4','d5','d6','d7'];
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  tasks.forEach(t => {
    const dayIndex = new Date(t.deadline).getDay();
    const box = document.getElementById('d' + (dayIndex || 7));
    if (box) {
      const el = document.createElement('div');
      el.style = 'margin-top:6px;padding:4px;background:#e3f2fd;border-radius:6px;';
      el.textContent = t.title.slice(0, 15);
      box.appendChild(el);
    }
  });
});
</script>

<!-- –í–∫–ª–∞–¥–∫–∏ –∑–∞ –ø—Ä–æ—î–∫—Ç–∞–º–∏ -->
<section style="max-width:1000px;margin:60px auto;">
  <h2 style="text-align:center;">–ü—Ä–æ—î–∫—Ç–∏</h2>
  <div id="projectTabs" style="display:flex;gap:10px;justify-content:center;"></div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  const projects = [...new Set(tasks.map(t => t.project || '–ë–µ–∑ –ø—Ä–æ—î–∫—Ç—É'))];
  const tabBar = document.getElementById('projectTabs');
  projects.forEach(p => {
    const btn = document.createElement('button');
    btn.className = 'btn-large';
    btn.textContent = p;
    btn.onclick = () => {
      const filtered = tasks.filter(t => (t.project || '–ë–µ–∑ –ø—Ä–æ—î–∫—Ç—É') === p);
      const container = document.getElementById('tasksContainer');
      container.innerHTML = '';
      filtered.forEach((task, index) => {
        const li = document.createElement('li');
        li.className = 'task-item';
        li.innerHTML = `<h3>${task.title}</h3><p>${task.desc}</p><p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> ${task.deadline}</p><p><strong>–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å:</strong> ${task.assignee}</p><p><strong>–°—Ç–∞—Ç—É—Å:</strong> ${task.status || 'ToDo'}</p>`;
        container.appendChild(li);
      });
    };
    tabBar.appendChild(btn);
  });
});
</script>

<!-- –ü—ñ–¥–∑–∞–¥–∞—á—ñ -->
<section style="max-width:800px;margin:20px auto;text-align:center;">
  <h2>–ü—ñ–¥–∑–∞–¥–∞—á—ñ</h2>
  <form onsubmit="addSubtask(event)">
    <input type="text" id="subtaskText" placeholder="–ü—ñ–¥–∑–∞–¥–∞—á–∞ –¥–æ –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –∑–∞–¥–∞—á—ñ" style="padding:10px;width:60%;border-radius:6px;border:1px solid #ccc;" required />
    <button class="btn-large" type="submit">‚ûï –î–æ–¥–∞—Ç–∏</button>
  </form>
  <ul id="subtaskList" style="margin-top:20px;"></ul>
</section>
<script>
function addSubtask(e) {
  e.preventDefault();
  const text = document.getElementById('subtaskText').value;
  const key = 'subtasks_' + (localStorage.getItem('tasks')?.length || 0);
  const all = JSON.parse(localStorage.getItem(key)) || [];
  all.push(text);
  localStorage.setItem(key, JSON.stringify(all));
  document.getElementById('subtaskText').value = '';
  renderSubtasks();
}
function renderSubtasks() {
  const key = 'subtasks_' + (localStorage.getItem('tasks')?.length || 0);
  const all = JSON.parse(localStorage.getItem(key)) || [];
  const ul = document.getElementById('subtaskList');
  ul.innerHTML = '';
  all.forEach(t => {
    const li = document.createElement('li');
    li.textContent = t;
    ul.appendChild(li);
  });
}
document.addEventListener('DOMContentLoaded', renderSubtasks);
</script>


<!-- PDF-–µ–∫—Å–ø–æ—Ä—Ç –∑–∞–¥–∞—á -->
<section style="text-align:center;margin:60px auto;">
  <button class="btn-large" onclick="downloadTasksPDF()">üìÑ –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞–¥–∞—á—ñ –≤ PDF</button>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
async function downloadTasksPDF() {
  const {{ jsPDF }} = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(14);
  doc.text("–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á", 20, 20);
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  let y = 30;
  tasks.forEach(t => {
    doc.text(`‚Ä¢ ${t.title} | ${t.status || 'ToDo'} | ${t.assignee}`, 20, y);
    y += 10;
    if (y > 280) {
      doc.addPage();
      y = 20;
    }
  });
  doc.save("tasks.pdf");
}
</script>

<!-- –ü–µ—Ä–µ–≥–ª—è–¥ –∑–∞–¥–∞—á —É—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ -->
<section style="max-width:800px;margin:20px auto;text-align:center;">
  <h2>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Ç–∞ –∑–∞–¥–∞—á—ñ</h2>
  <div id="allUsersTasks"></div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  const byUser = {};
  tasks.forEach(t => {
    const email = t.email || '–Ω–µ–≤—ñ–¥–æ–º–æ';
    if (!byUser[email]) byUser[email] = [];
    byUser[email].push(t);
  });

  const container = document.getElementById('allUsersTasks');
  Object.entries(byUser).forEach(([email, list]) => {
    const div = document.createElement('div');
    div.style = 'margin-bottom:20px;padding:20px;border:1px solid #ccc;border-radius:10px;';
    div.innerHTML = `<h3>${email}</h3>` + list.map(t => `<div style='text-align:left;'>- ${t.title} (${t.status})</div>`).join('');
    container.appendChild(div);
  });
});
</script>

</body>
</html>
